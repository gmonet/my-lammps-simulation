# My Lammps Simulation

Some examples of molecular dynamics simulation projects performed on LAMMPS.

## How I install LAMMP
1. Clone Lammps project from GitHub repository  
```bash
git clone -b stable https://github.com/lammps/lammps.git mylammps
```
2. Create a folder for build  
```bash
cd mylammps
mkdir build
cd build
```
3. Build !  
- Build for a CPU-only usage (with MPI support).  
```bash
cmake -C ../cmake/presets/basic.cmake \
      -D BUILD_MPI=yes -D PKG_OPT=yes \
      -D PKG_MOLECULE=on -D PKG_MOLFILE=on \
      -D CMAKE_BUILD_TYPE=Release\
      ../cmake
```

- Build for a CPU + GPU (Nvidia) usage.  
First install cuda toolkit. For that, I recommand to make a fresh install of your graphic card driver:
```bash
sudo -i
apt clean; apt update; apt purge cuda; apt purge nvidia-*; apt autoremove; apt install cuda
```
Then you can build LAMMPS with CUDA support.
```bash
export HIP_PLATFORM=nvcc
export CUDA_PATH=/usr/local/cuda-XXX  # Path to CUDA
cmake -C ../cmake/presets/basic.cmake \
        -D BUILD_MPI=yes -D PKG_OPT=yes \
      -D PKG_MOLECULE=on -D PKG_MOLFILE=on \
      -D PKG_GPU=on -D GPU_API=cuda\
      -D CMAKE_BUILD_TYPE=Release\
      ../cmake
```
## Other packages I like:
- `-D PKG_NETCDF=on` : The Netcdf (amber) file format for saving molecular trajectories is more convenient to deal with than the default file formats generated by LAMMPS: it is for example possible to read a particular frame or list of frames from a very long trajectory almost instantaneously. This format is very well supported by Python (see netCDF4 package).  
To install netcdf on linux:
```bash
wget https://parallel-netcdf.github.io/Release/pnetcdf-1.12.2.tar.gz
tar xfz pnetcdf-1.12.2.tar.gz && cd pnetcdf-1.12.2
./configure
make
sudo make install```

- `-D PKG_COMPRESS=on` : Allows to save molecular trajectories in compressed xyz format (.xyz.gz).